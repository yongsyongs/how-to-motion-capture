## 재귀 반사 패시브 마커 기반 모션캡쳐

모션캡쳐는 어떤 센서로부터 사람의 동작을 측정하는 것입니다. 여기서 말하는 센서는 일반적으로 광학 센서 = **카메라**입니다. 

>  IMU 센서에 기반하여 동작을 측정하는 작업이 일반적으로 개발하기 쉽고, 세팅 비용이 쌉니다. 실제로 아두이노만 다룰 줄 알면 되고, 센서값도 상당히 쌉니다. 그러나 측정값의 변화량에 기반한 metric이 산출되므로 오차가 누적되는 현상(drift error)이 발생하여 그리 선호되지는 않습니다. 간단하게 real-time 수준에서 정확도가 중요하지 않은 작업의 경우 IMU 기반 모션 캡쳐를 추천할 만합니다. 

본 문서에서는 광학 기반의 모션 캡쳐를 다룹니다. 정확하게는 **적외선 재귀 반사 Passive Marker**에 기반한 모션캡쳐에 대해서 다룹니다.

이 방식은 아래와 같은 Hardware들이 필요합니다.

- 적외선 카메라(및 카메라로 촬영하기 위한 기타 장비 전반 - 삼각대 등)
- 적외선 광원(LED 등)
- 적외선 재귀 반사 마커



재귀 반사란 빛이 반사될 때 투사된 방향으로 반사됨을 뜻합니다. 

![](https://www.3m.co.kr/wps/wcm/connect/ebf8774b-b704-4556-8a80-df1e2cf1e99d/1194129_410x205_HowRetroWorksRetro.jpg?MOD=AJPERES&CACHEID=ROOTWORKSPACE-ebf8774b-b704-4556-8a80-df1e2cf1e99d-mdE4h.E)

이 재귀 반사 성질을 가진 마커를 활용하면 화면상에서 마커의 위치를 쉽게 탐지할 수 있습니다. 구체적인 방법은 아래와 같습니다.

1. 적외선 카메라의 광각 중심 방향으로 적외선이 조사되도록 합니다
2. 적외선 재귀 반사 마커가 촬영되도록 마커를 위치합니다.
3. 재귀 반사 성질에 의해 광원에서 마커에 도달한 빛은 다시 광원으로 향합니다.
4. (상대적으로) 이 많은 양의 반사된 빛들은 렌즈에 도달하여 카메라가 촬영하게 됩니다.
5. 촬영 결과 적외선 영상에서는 마커 부분이 매우 빛나게 됩니다.



빛은 일반적으로 정반사 혹은 난반사되기에, 광원에서 출발한 빛들 중 적은 양만이 렌즈에 도달합니다. 그러나 재귀 반사가 발생하면 빛이 광원의 위치로 다시 반사되며, 광원과 카메라의 위치가 (거의) 같을 때 렌즈에 도달하는 빛이 매우 많아집니다. 따라서 마커의 위치를 영상에서 상당히 쉽게 찾을 수 있습니다.

아래 유튜브 영상을 참조하세요.

<iframe width="560" height="315" src="https://www.youtube.com/embed/Hcut5ztu6Nw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>



마커의 위치를 영상에서 잘 찾아내었다면 이후 **캘리브레이션(Calibration)** 작업을 진행해야 합니다.